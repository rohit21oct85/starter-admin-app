(this.webpackJsonpresources=this.webpackJsonpresources||[]).push([[0],{100:function(e,a,t){},101:function(e,a,t){"use strict";t.r(a);var c=t(0),s=t.n(c),n=t(21),l=t.n(n),o=(t(63),t(11)),r=t(9),i=(t(64),t(104)),d=t(19),u=t(12),j=t(1),m=localStorage.getItem("fullname"),b=localStorage.getItem("email"),p=localStorage.getItem("role"),O=localStorage.getItem("created_at"),h=localStorage.getItem("isLoggedIn"),x=localStorage.getItem("access_token"),v=localStorage.getItem("refresh_token"),f={isLoggedIn:h||!1,fullname:m||null,email:b||null,role:p||null,created_at:O||null,access_token:x||null,refresh_token:v||null},g=s.a.createContext(f),N=function(e,a){switch(a.type){case"LOGIN":return Object(u.a)(Object(u.a)({},e),{},{isLoggedIn:a.payload.isLoggedIn,fullname:a.payload.fullname,email:a.payload.email,role:a.payload.role,created_at:a.payload.created_at,access_token:a.payload.access_token,refresh_token:a.payload.refresh_token});case"LOGOUT":return localStorage.clear(),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("fullname"),localStorage.removeItem("email"),Object(u.a)(Object(u.a)({},e),{},{isLoggedIn:!1,fullname:null,email:null,access_token:null,refresh_token:null});default:return e}};var _=function(e){var a=e.children,t=Object(c.useReducer)(N,f),s=Object(d.a)(t,2),n=s[0],l=s[1];return Object(j.jsx)(g.Provider,{value:{state:n,dispatch:l},children:a})},k=t(10),w=t.n(k),y=t(17),I=t(107),S=t(22),L=t.n(S),C="https://max-hospitals.herokuapp.com/api/";function A(){var e=Object(c.useContext)(g).state;return Object(I.a)("app-modules",Object(y.a)(w.a.mark((function a(){var t;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.access_token){a.next=5;break}return a.next=3,L.a.get("".concat(C,"v1/module/view-all"),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+e.access_token}});case 3:return t=a.sent,a.abrupt("return",t.data.data);case 5:case"end":return a.stop()}}),a)}))))}function T(e){var a=e.isLoading;return Object(j.jsx)("div",{children:a&&Object(j.jsx)("div",{class:"spinner-border",style:{marginLeft:"9px",width:"24px",height:"24px"},role:"status",children:Object(j.jsx)("span",{class:"sr-only",children:"Loading..."})})})}function F(){var e=Object(r.g)(),a=(Object(r.h)(),Object(r.i)(),Object(c.useContext)(g)),t=a.state,s=a.dispatch,n=A(),l=n.data,d=n.isLoading;return Object(j.jsx)(j.Fragment,{children:t.isLoggedIn&&Object(j.jsxs)("div",{className:"login_menu col-lg-2 col-md-2 col-12",bg:"dark",variant:"dark",expand:"lg",children:[Object(j.jsx)("div",{className:"webLogo",children:Object(j.jsx)("img",{src:"/logo.png",style:{width:"62%"},alt:"User"})}),Object(j.jsxs)("div",{className:"user_area",children:[Object(j.jsx)("div",{className:"col-md-12 user_icon",children:Object(j.jsx)("div",{className:"col-md-12 p-0",children:Object(j.jsx)("img",{src:"/profile.jpeg",className:"profileImage"})})}),Object(j.jsxs)("div",{className:"user_options mt-1",children:[Object(j.jsx)("div",{className:"col-md-12 p-0 user_details",children:Object(j.jsx)("span",{className:"user_name",children:null===t||void 0===t?void 0:t.fullname})}),Object(j.jsx)("div",{className:"col-md-12 p-0 user_details",children:Object(j.jsx)("span",{className:"user_name",children:null===t||void 0===t?void 0:t.email})}),Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{as:o.b,children:Object(j.jsx)("button",{className:"btn-success p-2 dark pt-0 pb-0 m-0",style:{borderRadius:"5px"},children:"1"===t.role?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("span",{className:"fa fa-lock"})," Super Admin"]}):" Admin"})}),Object(j.jsx)("li",{as:o.b,onClick:function(){s({type:"LOGOUT"}),e.push("/")},alt:"Logout",children:Object(j.jsxs)("button",{className:"btn-danger p-2 dark pt-0 pb-0 m-0",style:{borderRadius:"5px"},children:[Object(j.jsx)("span",{className:"fa fa-power-off mr-2"}),"Logout"]})})]})]})]}),Object(j.jsx)("div",{className:"navbar_menus",children:Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{children:Object(j.jsx)(i.a,{className:"ml-auto",children:Object(j.jsxs)(o.c,{to:"/dashboard",children:[" ",Object(j.jsx)("span",{className:"fa fa-dashboard"})," Dashboard"]})})}),Object(j.jsx)("li",{children:Object(j.jsx)(i.a,{className:"ml-auto",children:Object(j.jsxs)(o.c,{to:"/app-module",children:[" ",Object(j.jsx)("span",{className:"fa fa-gear"})," App Module "]})})}),Object(j.jsx)(T,{isLoading:d}),null===l||void 0===l?void 0:l.map((function(e){return Object(j.jsx)("li",{id:null===e||void 0===e?void 0:e.module_slug,children:Object(j.jsx)(i.a,{className:"ml-auto",children:Object(j.jsxs)(o.c,{to:"/".concat(null===e||void 0===e?void 0:e.module_slug),children:[" ",Object(j.jsx)("span",{className:"fa ".concat(null===e||void 0===e?void 0:e.module_icon)})," ",null===e||void 0===e?void 0:e.module_name," "]})})},null===e||void 0===e?void 0:e._id)}))]})})]})})}t(91);var M=t(30),D=function(e){var a=e.component,t=Object(M.a)(e,["component"]),s=Object(c.useContext)(g).state;return Object(j.jsx)(r.b,Object(u.a)(Object(u.a)({},t),{},{render:function(e){return s.isLoggedIn?Object(j.jsx)(a,Object(u.a)({},e)):Object(j.jsx)(r.a,{to:{pathname:"/login"}})}}))},E=function(e){var a=e.component,t=Object(M.a)(e,["component"]),s=Object(c.useContext)(g).state;return Object(j.jsx)(r.b,Object(u.a)(Object(u.a)({},t),{},{render:function(e){return"1"==s.role?Object(j.jsx)(a,Object(u.a)({},e)):Object(j.jsx)(r.a,{to:{pathname:"/403"}})}}))},B=t(105),P=t(103);t(92);t(93);var G=t(27),R=t(108),U=(t(56),function(e){var a,t,c;return null===e||void 0===e||null===(a=e.trim())||void 0===a||null===(t=a.toLowerCase())||void 0===t||null===(c=t.replace(/[^\w ]+/g,""))||void 0===c?void 0:c.replace(/ +/g,"-")}),z=t(28);function q(){var e=Object(r.g)(),a=Object(r.i)(),t=Object(r.h)().pathname,s=Object(z.useToasts)().addToast,n=Object(c.useContext)(g).state,l=Object(c.useState)(""),o=Object(d.a)(l,2),i=o[0],m=o[1],b=Object(c.useState)(""),p=Object(d.a)(b,2),O=p[0],h=p[1],x=Object(c.useState)(!1),v=Object(d.a)(x,2),f=v[0],N=v[1],_=function(){var e=Object(r.i)(),a=null===e||void 0===e?void 0:e.module_id,t=Object(c.useContext)(g).state;return Object(I.a)("single-module-".concat(a),Object(y.a)(w.a.mark((function e(){var c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a){e.next=5;break}return e.next=3,L.a.get("".concat(C,"v1/module/view/").concat(a),{headers:{"Content-Type":"Application/json",Authorization:"Bearer "+t.access_token}});case 3:return c=e.sent,e.abrupt("return",c.data.data);case 5:case"end":return e.stop()}}),e)}))))}().data,k=Object(c.useState)(),S=Object(d.a)(k,2),A=S[0],T=S[1],F=Object(c.useState)({}),M=Object(d.a)(F,2),D=M[0];M[1];function E(){m(""),h(""),T({})}Object(c.useEffect)((function(){T(_)}),[_]);var B=Object(G.b)(),P={headers:{"Content-Type":"Application/json",Authorization:"Bearer "+n.access_token}},q=Object(R.a)((function(e){return L.a.post("".concat(C,"v1/module/create"),e,P)}),{onSuccess:function(){B.invalidateQueries("app-modules"),N(!1),E(),e.push("".concat(t)),s("App Module added successfully",{appearance:"success",autoDismiss:!0})}}),J=Object(R.a)((function(e){var t=null===a||void 0===a?void 0:a.module_id;return L.a.patch("".concat(C,"v1/module/update/").concat(t),e,P)}),{onSuccess:function(){B.invalidateQueries("app-modules"),N(!1),E(),e.push("".concat(t)),s("App Module Updated successfully",{appearance:"success",autoDismiss:!0}),e.push("/app-module")}}),Q=function(){var e=Object(y.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),N(!0),D.module_name=(null===a||void 0===a?void 0:a.module_id)?null===A||void 0===A?void 0:A.module_name:i,D.module_slug=U((null===a||void 0===a?void 0:a.module_id)?null===A||void 0===A?void 0:A.module_name:i),D.module_icon=(null===a||void 0===a?void 0:a.module_id)?null===A||void 0===A?void 0:A.module_icon:O,!(null===a||void 0===a?void 0:a.module_id)){e.next=10;break}return e.next=8,J.mutate(D);case 8:e.next=12;break;case 10:return e.next=12,q.mutate(D);case 12:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("p",{className:"form-heading",children:[Object(j.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"Create App Module"]}),Object(j.jsx)("hr",{className:"mt-1"}),Object(j.jsxs)("form",{onSubmit:Q,children:[Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("input",{type:"text",className:"form-control",value:(null===a||void 0===a?void 0:a.module_id)?null===A||void 0===A?void 0:A.module_name:i,onChange:function(e){(null===a||void 0===a?void 0:a.module_id)?T(Object(u.a)(Object(u.a)({},A),{},{module_name:e.target.value})):m(e.target.value)},placeholder:"Module Name"})}),Object(j.jsxs)("div",{className:"form-group p-rel",children:[Object(j.jsx)("input",{type:"text",className:"form-control ".concat((null===a||void 0===a?void 0:a.module_id)?"pl6x":""),value:(null===a||void 0===a?void 0:a.module_id)?null===A||void 0===A?void 0:A.module_icon:O,placeholder:"Module Icon",onChange:function(e){(null===a||void 0===a?void 0:a.module_id)?T(Object(u.a)(Object(u.a)({},A),{},{module_icon:e.target.value})):h(e.target.value)}}),Object(j.jsx)("span",{className:"fa p-abs tl10 ".concat(null===A||void 0===A?void 0:A.module_icon)})]}),Object(j.jsxs)("div",{className:"form-group flex",children:[Object(j.jsx)("button",{className:"btn btn-sm dark",children:f?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("span",{className:"fa fa-spinner mr-2"}),"processing ...."]}):Object(j.jsx)(j.Fragment,{children:(null===a||void 0===a?void 0:a.module_id)?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("span",{className:"fa fa-save mr-2"})," Update App Module"]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("span",{className:"fa fa-save mr-2"})," Save App Module"]})})}),(null===a||void 0===a?void 0:a.module_id)&&Object(j.jsxs)("button",{className:"btn btn-sm dark ml-2",onClick:function(a){a.preventDefault(),E(),T({}),e.push("/app-module")},children:[Object(j.jsx)("span",{className:"fa fa-times mr-2"}),"Cancel"]})]})]})]})}function J(e){var a=e.module,t=Object(r.g)();return Object(j.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start",flexDirection:"row-reverse"},children:[Object(j.jsx)("span",{className:"fa fa-minus-square pointer text-danger"}),Object(j.jsx)("span",{className:"fa fa-pencil-square mr-2 text-success pointer",onClick:function(e){e.preventDefault(),t.push("/app-module/".concat(null===a||void 0===a?void 0:a._id))}}),Object(j.jsx)("span",{className:"fa fa-eye mr-2 pointer text-danger",onClick:function(e){return t.push("/".concat(null===a||void 0===a?void 0:a.module_slug))}})]})}function Q(e){var a=e.module;return Object(j.jsx)("div",{className:"lg-card",children:Object(j.jsxs)("div",{className:"admin-name",children:[Object(j.jsxs)("div",{className:"name-main",children:[Object(j.jsx)("span",{className:"fa ".concat(null===a||void 0===a?void 0:a.module_icon," mt-1 mr-2")}),null===a||void 0===a?void 0:a.module_name]}),Object(j.jsx)(J,{module:a})]})})}function W(){var e=A(),a=e.data,t=e.isLoading;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("p",{className:"form-heading",children:[Object(j.jsx)("span",{className:"fa fa-plus-circle mr-2"}),"App Modules"]}),Object(j.jsx)("hr",{className:"mt-1"}),t&&Object(j.jsxs)("div",{class:"spinner-border",role:"status",children:[" ",Object(j.jsx)("span",{class:"sr-only",children:"Loading..."})," "]}),Object(j.jsx)("div",{className:"col-md-12 row no-gutter data-container",children:null===a||void 0===a?void 0:a.map((function(e){return Object(j.jsx)(Q,{module:e},null===e||void 0===e?void 0:e._id)}))})]})}t(100);var Y=[{path:"/",component:function(){var e=Object(r.g)(),a=Object(r.h)(),t=Object(c.useRef)(),s=Object(c.useRef)(),n=Object(c.useState)(null),l=Object(d.a)(n,2),i=l[0],u=l[1],m=Object(c.useContext)(g),b=m.dispatch,p=m.state,O=Object(c.useState)(!1),h=Object(d.a)(O,2),x=h[0],v=h[1],f=function(){var a=Object(y.a)(w.a.mark((function a(c){var n,l,o,r,i,d,j,m,p,O,h;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(c.preventDefault(),n=t.current.value,l=s.current.value,""!==n){a.next=8;break}return u("Please enter email address"),a.abrupt("return",!1);case 8:if(""!==l){a.next=13;break}return u("Please enter password"),a.abrupt("return",!1);case 13:return v(!0),o={email:t.current.value,password:s.current.value},a.next=17,L.a.post("".concat(C,"v1/admin/login"),o);case 17:(r=a.sent).response&&r.response.status?(u("Email or password not matched"),v(!1)):(i=r.data.accessToken,d=r.data.refreshToken,j=r.data.admin.first_name+" "+r.data.admin.last_name,m=r.data.admin.email,p=r.data.admin.role,O=r.data.admin.created_at,h=!0,localStorage.setItem("access_token",i),localStorage.setItem("refresh_token",d),localStorage.setItem("fullname",j),localStorage.setItem("email",m),localStorage.setItem("role",p),localStorage.setItem("created_at",O),localStorage.setItem("isLoggedIn",h),b({type:"LOGIN",payload:{isLoggedIn:h,fullname:j,email:m,role:p,created_at:O,access_token:i,refresh_token:d}}),e.push("/dashboard"));case 19:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();function N(){return(N=Object(y.a)(w.a.mark((function a(){return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:"true"==p.isLoggedIn&&e.push("/dashboard");case 1:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return Object(c.useEffect)((function(){"/admin"!==a.pathname&&"/admin/"!==a.pathname||e.push("/admin/login"),t.current.value="madmin@gmail.com",s.current.value=""}),[]),Object(c.useEffect)((function(){var e=setTimeout((function(){return u(null)}),2500);return function(){clearTimeout(e)}}),[i]),Object(c.useEffect)((function(){return N.apply(this,arguments)}),[p]),Object(j.jsxs)("div",{className:"container-fluid p-0 m-0 text-center LoginBg",children:[Object(j.jsx)("div",{className:"col-md-12",children:Object(j.jsx)(o.c,{to:"/",children:Object(j.jsx)("img",{className:"logo",alt:"company Logo",src:"/logo.png"})})}),Object(j.jsx)("div",{className:"row no-gutter",children:Object(j.jsxs)("div",{className:"col-md-3 loginDiv",children:[Object(j.jsx)("h4",{children:"Admin Login "}),i&&Object(j.jsx)("p",{style:{color:"red",margin:"0px"},children:i}),Object(j.jsx)("hr",{}),Object(j.jsxs)(B.a,{autoComplete:"off",onSubmit:f,children:[Object(j.jsxs)(B.a.Group,{controlId:"formBasicEmail",className:"text-left",children:[Object(j.jsxs)(B.a.Label,{children:[" ",Object(j.jsx)("span",{className:"fa fa-send mr-2"})," Email address"]}),Object(j.jsx)(B.a.Control,{type:"email",autoComplete:"off",ref:t,placeholder:"Enter email"}),Object(j.jsx)(B.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(j.jsx)("hr",{}),Object(j.jsxs)(B.a.Group,{controlId:"formBasicPassword",className:"text-left",children:[Object(j.jsxs)(B.a.Label,{children:[" ",Object(j.jsx)("span",{className:"fa fa-lock mr-2"})," Password"]}),Object(j.jsx)(B.a.Control,{type:"password",autoComplete:"off",ref:s,placeholder:"Password"})]}),Object(j.jsx)("hr",{}),Object(j.jsx)(P.a,{className:"btn btn-md btn-block btn-success w-100",type:"submit",children:x?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("span",{className:"fa fa-spinner mr-2",children:" "})," Authenticating..."]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("span",{className:"fa fa-lock mr-2",children:" "})," Login Your Account"]})})]})]})})]})}}],H=[{path:"/dashboard",component:function(){var e=Object(c.useContext)(g).state;return Object(j.jsx)(j.Fragment,{children:e.isLoggedIn&&Object(j.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(j.jsx)("div",{className:"main-area-all",children:Object(j.jsxs)("div",{className:"dashboard_main-container",children:[Object(j.jsx)("div",{className:"dash-main-head",children:Object(j.jsx)("h2",{children:"Dashboard"})}),Object(j.jsx)("div",{className:"dash_over_view",children:Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-md-12 pl-0",children:1===e.role&&Object(j.jsx)("div",{className:"col-md-3 card ml-3  pt-2 pb-2 main-box gradient-ibiza",children:Object(j.jsxs)("div",{className:"card-body pt-0 pb-0 pl-0",children:[Object(j.jsxs)("div",{className:"box-head",children:[Object(j.jsx)("h4",{children:"Admin"}),Object(j.jsx)("div",{className:"box-icon",children:Object(j.jsx)("span",{className:"fa fa-users"})})]}),Object(j.jsx)("div",{className:"main-box-text",children:Object(j.jsx)("b",{children:"Total: 1 "})})]})})})})})]})})})})}}],K=[{path:"/app-module/:module_id?",component:function(){Object(r.i)();var e=Object(r.g)();return Object(j.jsx)("div",{className:"col-lg-10 col-md-10 main_dash_area",children:Object(j.jsx)("div",{className:"main-area-all",children:Object(j.jsxs)("div",{className:"dashboard_main-container",children:[Object(j.jsx)("div",{className:"dash-main-head",children:Object(j.jsx)("h2",{children:"App Modules List"})}),Object(j.jsx)("div",{className:"dash-con-heading",children:Object(j.jsx)("div",{className:"col-md-12 row",children:Object(j.jsx)("button",{className:"btn btn-sm dark",onClick:function(a){e.push("/dashboard")},children:Object(j.jsx)("span",{className:"fa fa-dashboard"})})})}),Object(j.jsx)("div",{className:"clearfix"}),Object(j.jsx)("div",{className:"dash-cont-start",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-md-3",children:Object(j.jsx)(q,{})}),Object(j.jsx)("div",{className:"col-md-9",children:Object(j.jsx)(W,{})})]})})]})})})}}],V=new(t(106).a)({defaultOptions:{queries:{refetchOnWindowFocus:!1}}});function X(){return Object(j.jsx)(o.a,{children:Object(j.jsx)("div",{className:"wrapper",children:Object(j.jsx)("div",{className:"row no-gutters",children:Object(j.jsx)(G.a,{client:V,children:Object(j.jsx)(_,{children:Object(j.jsxs)(z.ToastProvider,{children:[Object(j.jsx)(F,{}),Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsxs)(r.d,{children:[null===Y||void 0===Y?void 0:Y.map((function(e){return Object(j.jsx)(r.b,{exact:!0,path:e.path,component:e.component},e.path)})),null===H||void 0===H?void 0:H.map((function(e){return Object(j.jsx)(D,{exact:!0,path:e.path,component:e.component},e.path)})),null===K||void 0===K?void 0:K.map((function(e){return Object(j.jsx)(E,{exact:!0,path:e.path,component:e.component},e.path)}))]})})]})})})})})})}l.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(X,{})}),document.getElementById("root"))},63:function(e,a,t){},64:function(e,a,t){},92:function(e,a,t){},93:function(e,a,t){}},[[101,1,2]]]);
//# sourceMappingURL=main.1b84b901.chunk.js.map